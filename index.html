<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Infinite Wordle</title>

<style>
body {
    margin: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ===== PAGE SYSTEM ===== */
.page {
    display: none;
    min-height: 100vh;
    max-width: 420px;
    margin: 0 auto;
    padding: 20px;
}
.page.active { display: block; }

/* ===== START PAGE ===== */
#start-page h1 {
    font-size: 3rem;
    margin-bottom: 12px;
}
#start-page p {
    color: #bbb;
    line-height: 1.6;
}
button {
    margin-top: 24px;
    padding: 14px 32px;
    border-radius: 999px;
    border: none;
    font-weight: 800;
    cursor: pointer;
}

/* ===== HEADER ===== */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.tooltip {
    position: relative;
    cursor: pointer;
}
.tooltip-box {
    display: none;
    position: absolute;
    right: 0;
    top: 140%;
    background: #111;
    border: 1px solid #333;
    padding: 10px;
    border-radius: 8px;
    font-size: 0.85rem;
    width: 220px;
}
.tooltip:hover .tooltip-box { display: block; }

/* ===== BOARD ===== */
#board {
    display: grid;
    grid-template-rows: repeat(6, 1fr);
    gap: 8px;
    margin: 20px 0;
}
.row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
}
.tile {
    height: 56px;
    background: #333;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    font-weight: 800;
    border-radius: 6px;
}
.correct { background: #538d4e; }
.present { background: #b59f3b; color:#000; }
.absent  { background: #3a3a3c; }

/* ===== KEYBOARD ===== */
.keyboard {
    margin-top: 24px;
}

.krow {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 6px;
}

.key {
    height: clamp(42px, 7vh, 48px);
    min-width: 32px;

    background: #2b2b2b;
    border-radius: 6px;

    font-size: 20px;
    font-weight: 800;
    line-height: 1;

    display: flex;
    align-items: center;
    justify-content: center;

    padding: 0;            /* ‚ùó critical */
    box-sizing: border-box;
    cursor: pointer;
}

.key.wide {
    min-width: 56px;
}
/* keyboard memory */
.key.absent { background:#3a3a3c; color:#777; }
.key.present { background:#b59f3b; color:#000; }
.key.correct { background:#538d4e; color:#000; }

/* ===== END PAGE ===== */
#end-page h2 { margin-bottom: 6px; }
#answer {
    font-size: 2.2rem;
    font-weight: 900;
    margin-bottom: 20px;
}
#review {
    display: grid;
    gap: 10px;
}
.review-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
}
</style>
</head>

<body>

<!-- START PAGE -->
<div id="start-page" class="page active">
    <h1>Infinite Wordle</h1>
    <p>
        Guess the 5-letter word in 6 tries.<br><br>
        üü¢ Correct letter & position<br>
        üü° Correct letter, wrong position<br><br>
        Unlimited words. Unlimited play.
    </p>
    <button onclick="startGame()">START GAME</button>
</div>

<!-- GAME PAGE -->
<div id="game-page" class="page">
    <div class="header">
        <h1>Wordle</h1>
        <div class="tooltip">?
            <div class="tooltip-box">
                Guess the 5-letter word<br><br>
                üü¢ Correct letter & position<br>
                üü° Correct letter, wrong position
            </div>
        </div>
    </div>

    <div id="board"></div>

    <div class="keyboard">
        <div class="krow">
            <div class="key">Q</div><div class="key">W</div><div class="key">E</div>
            <div class="key">R</div><div class="key">T</div><div class="key">Y</div>
            <div class="key">U</div><div class="key">I</div><div class="key">O</div><div class="key">P</div>
        </div>
        <div class="krow">
            <div class="key">A</div><div class="key">S</div><div class="key">D</div>
            <div class="key">F</div><div class="key">G</div><div class="key">H</div>
            <div class="key">J</div><div class="key">K</div><div class="key">L</div>
        </div>
        <div class="krow">
            <div class="key wide">ENTER</div>
            <div class="key">Z</div><div class="key">X</div><div class="key">C</div>
            <div class="key">V</div><div class="key">B</div><div class="key">N</div>
            <div class="key">M</div>
            <div class="key wide">‚å´</div>
        </div>
    </div>
</div>

<!-- END PAGE -->
<div id="end-page" class="page">
    <h2>Game Over</h2>
    <div id="answer"></div>
    <h3>Your Guesses</h3>
    <div id="review"></div>
    <button onclick="newWord()">NEW WORD</button>
</div>

<script>
/* ===== DATA ===== */
const WORDS = [
"ABOUT","APPLE","BRICK","CHAIR","DRIVE","EARTH","FRAME",
"GRAPE","HOUSE","PLANT","STONE","TRAIN","WATER"
];

/* ===== STATE ===== */
let correctWord = "";
let currentGuess = "";
let row = 0;
let gameOver = false;
let guesses = [];
const keyState = {}; // keyboard memory

const board = document.getElementById("board");

/* ===== PAGE CONTROL ===== */
function showPage(id) {
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* ===== GAME FLOW ===== */
function startGame() {
    showPage("game-page");
    resetGame();
}

function newWord() {
    showPage("game-page");
    resetGame();
}

function resetGame() {
    correctWord = WORDS[Math.floor(Math.random()*WORDS.length)];
    currentGuess = "";
    row = 0;
    gameOver = false;
    guesses = [];
    board.innerHTML = "";

    // reset keyboard memory
    for (const k in keyState) delete keyState[k];
    document.querySelectorAll(".key").forEach(k=>{
        k.classList.remove("absent","present","correct");
    });

    for(let r=0;r<6;r++){
        const rowDiv=document.createElement("div");
        rowDiv.className="row";
        for(let c=0;c<5;c++){
            const t=document.createElement("div");
            t.className="tile";
            rowDiv.appendChild(t);
        }
        board.appendChild(rowDiv);
    }
}

/* ===== KEYBOARD MEMORY ===== */
function updateKey(letter, state) {
    const priority = { absent:1, present:2, correct:3 };
    if (keyState[letter] && priority[keyState[letter]] >= priority[state]) return;
    keyState[letter] = state;

    document.querySelectorAll(".key").forEach(k=>{
        if(k.textContent===letter){
            k.classList.remove("absent","present","correct");
            k.classList.add(state);
        }
    });
}

/* ===== GAME LOGIC ===== */
function submitGuess() {
    if (gameOver || currentGuess.length !== 5) return;

    const result = Array(5).fill("absent");
    const temp = correctWord.split("");

    [...currentGuess].forEach((c,i)=>{
        if(c===correctWord[i]){
            result[i]="correct";
            temp[i]=null;
        }
    });

    [...currentGuess].forEach((c,i)=>{
        if(result[i]==="absent"){
            const idx=temp.indexOf(c);
            if(idx>-1){
                result[i]="present";
                temp[idx]=null;
            }
        }
    });

    guesses.push({ word: currentGuess, result });

    const tiles = board.children[row].children;
    result.forEach((r,i)=>{
        tiles[i].textContent=currentGuess[i];
        tiles[i].classList.add(r);
        updateKey(currentGuess[i], r);
    });

    if (currentGuess === correctWord || row === 5) {
        gameOver = true;
        setTimeout(endGame, 400);
        return;
    }

    row++;
    currentGuess = "";
}

function endGame() {
    showPage("end-page");
    document.getElementById("answer").textContent = correctWord;
    const review=document.getElementById("review");
    review.innerHTML="";

    guesses.forEach(g=>{
        const r=document.createElement("div");
        r.className="review-row";
        [...g.word].forEach((ch,i)=>{
            const t=document.createElement("div");
            t.className="tile "+g.result[i];
            t.textContent=ch;
            r.appendChild(t);
        });
        review.appendChild(r);
    });
}

/* ===== INPUT ===== */
function handleInput(k){
    if(gameOver) return;

    if(k==="ENTER") submitGuess();
    else if(k==="‚å´") currentGuess=currentGuess.slice(0,-1);
    else if(/^[A-Z]$/.test(k) && currentGuess.length<5) currentGuess+=k;

    const tiles=board.children[row]?.children;
    if(tiles){
        for(let i=0;i<5;i++){
            tiles[i].textContent=currentGuess[i]||"";
        }
    }
}

document.querySelectorAll(".key").forEach(k=>{
    k.onclick=()=>handleInput(k.textContent);
});

document.addEventListener("keydown",e=>{
    if(e.key==="Enter") handleInput("ENTER");
    else if(e.key==="Backspace") handleInput("‚å´");
    else if(/^[a-zA-Z]$/.test(e.key)) handleInput(e.key.toUpperCase());
});
</script>

</body>
</html>