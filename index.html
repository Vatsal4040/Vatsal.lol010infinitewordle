<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Infinite Wordle</title>

<style>
/* ===== GLOBAL ===== */
html, body {
    width: 100%;
    margin: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    overflow-x: hidden;
}

.page {
    display: none;
    min-height: 100svh;
    max-width: 480px;
    margin: 0 auto;
    padding: 16px;
    box-sizing: border-box;
}
.page.active { display: block; }

/* ===== START PAGE ===== */
#start-page h1 {
    font-size: 3rem;
    letter-spacing: 4px;
}
#start-page p {
    color: #bbb;
    line-height: 1.6;
}
button {
    margin-top: 24px;
    padding: 14px 36px;
    border-radius: 999px;
    border: none;
    font-weight: 800;
    cursor: pointer;
}

/* ===== HEADER ===== */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.tooltip {
    position: relative;
    cursor: pointer;
}
.tooltip-box {
    display: none;
    position: absolute;
    right: 0;
    top: 140%;
    background: #111;
    border: 1px solid #333;
    padding: 12px;
    border-radius: 10px;
    font-size: 0.85rem;
    width: 240px;
}
.tooltip:hover .tooltip-box { display: block; }

/* ===== BOARD ===== */
#board {
    display: grid;
    grid-template-rows: repeat(6, 1fr);
    gap: 8px;
    margin: 20px 0;
}
.row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
}

/* ===== TILE ===== */
.tile {
    height: 56px;
    background: #121212;
    border: 1px solid #2a2a2a;
    border-radius: 8px;

    font-size: 1.9rem;
    font-weight: 900;

    display: flex;
    align-items: center;
    justify-content: center;

    perspective: 800px;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}

/* tile face */
.tile-inner {
    width: 100%;
    height: 100%;
    border-radius: 8px;

    display: flex;
    align-items: center;
    justify-content: center;

    backface-visibility: hidden;
    transform-style: preserve-3d;
    transition: transform 0.6s ease;
}

/* flip trigger */
.tile.flip .tile-inner {
    transform: rotateX(180deg);
}

/* colors */
.correct { background: #6aaa64; color: #000; }
.present { background: #c9b458; color: #000; }
.absent  { background: #3a3a3c; }

/* ===== KEYBOARD ===== */
.keyboard { margin-top: 24px; }
.krow {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-bottom: 6px;
}
.key {
    height: clamp(42px, 7vh, 48px);
    min-width: 32px;
    background: #2b2b2b;
    border-radius: 6px;
    font-size: 20px;
    font-weight: 800;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}
.key.wide { min-width: 56px; }

/* keyboard memory */
.key.absent { background:#3a3a3c; color:#777; }
.key.present { background:#c9b458; color:#000; }
.key.correct { background:#6aaa64; color:#000; }

/* ===== END PAGE ===== */
#answer {
    font-size: 2.4rem;
    font-weight: 900;
    margin-bottom: 16px;
}
#review {
    display: grid;
    gap: 10px;
}
.review-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
}
</style>
</head>

<body>

<!-- START PAGE -->
<div id="start-page" class="page active">
    <h1>INFINITE WORDLE</h1>
    <p>
        Guess the 5-letter word in 6 tries.<br><br>
        ðŸŸ¢ Correct letter & position<br>
        ðŸŸ¡ Correct letter, wrong position
    </p>
    <button onclick="startGame()">PLAY</button>
</div>

<!-- GAME PAGE -->
<div id="game-page" class="page">
    <div class="header">
        <h2>WORDLE</h2>
        <div class="tooltip">?
            <div class="tooltip-box">
                Guess the 5-letter word<br><br>
                ðŸŸ¢ Correct letter & position<br>
                ðŸŸ¡ Correct letter, wrong position
            </div>
        </div>
    </div>

    <div id="board"></div>

    <div class="keyboard">
        <div class="krow">
            <div class="key">Q</div><div class="key">W</div><div class="key">E</div>
            <div class="key">R</div><div class="key">T</div><div class="key">Y</div>
            <div class="key">U</div><div class="key">I</div><div class="key">O</div><div class="key">P</div>
        </div>
        <div class="krow">
            <div class="key">A</div><div class="key">S</div><div class="key">D</div>
            <div class="key">F</div><div class="key">G</div><div class="key">H</div>
            <div class="key">J</div><div class="key">K</div><div class="key">L</div>
        </div>
        <div class="krow">
            <div class="key wide">ENTER</div>
            <div class="key">Z</div><div class="key">X</div><div class="key">C</div>
            <div class="key">V</div><div class="key">B</div><div class="key">N</div>
            <div class="key">M</div>
            <div class="key wide">âŒ«</div>
        </div>
    </div>
</div>

<!-- END PAGE -->
<div id="end-page" class="page">
    <h2>GAME OVER</h2>
    <div id="answer"></div>
    <div id="review"></div>
    <button onclick="newWord()">NEW WORD</button>
</div>

<script>
const WORDS=["APPLE","GRAPE","STONE","PLANT","TRAIN","WATER","HOUSE"];
let correctWord="",row=0,guess="",over=false;
let guesses=[];
const keyState={};
const board=document.getElementById("board");

function showPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}
function startGame(){showPage("game-page");resetGame();}
function newWord(){showPage("game-page");resetGame();}

function resetGame(){
    correctWord=WORDS[Math.floor(Math.random()*WORDS.length)];
    row=0;guess="";over=false;guesses=[];
    board.innerHTML="";
    Object.keys(keyState).forEach(k=>delete keyState[k]);
    document.querySelectorAll(".key").forEach(k=>k.classList.remove("absent","present","correct"));
    for(let r=0;r<6;r++){
        const rd=document.createElement("div");rd.className="row";
        for(let c=0;c<5;c++){
            const t=document.createElement("div");t.className="tile";
            t.innerHTML='<div class="tile-inner"></div>';
            rd.appendChild(t);
        }
        board.appendChild(rd);
    }
}

function updateKey(l,s){
    const p={absent:1,present:2,correct:3};
    if(keyState[l]&&p[keyState[l]]>=p[s])return;
    keyState[l]=s;
    document.querySelectorAll(".key").forEach(k=>{
        if(k.textContent===l){
            k.classList.remove("absent","present","correct");
            k.classList.add(s);
        }
    });
}

function submit(){
    if(over||guess.length!==5)return;
    const res=Array(5).fill("absent");
    const tmp=correctWord.split("");
    [...guess].forEach((c,i)=>{if(c===correctWord[i]){res[i]="correct";tmp[i]=null;}});
    [...guess].forEach((c,i)=>{if(res[i]==="absent"){const x=tmp.indexOf(c);if(x>-1){res[i]="present";tmp[x]=null;}}});
    guesses.push({word:guess,res});
    const tiles=board.children[row].children;
    res.forEach((r,i)=>{
        const inner=tiles[i].firstChild;
        inner.textContent=guess[i];
        setTimeout(()=>{
            tiles[i].classList.add("flip");
            inner.classList.add(r);
            updateKey(guess[i],r);
        },i*120);
    });
    if(guess===correctWord||row===5){over=true;setTimeout(endGame,900);return;}
    row++;guess="";
}

function endGame(){
    showPage("end-page");
    document.getElementById("answer").textContent=correctWord;
    const rev=document.getElementById("review");
    rev.innerHTML="";
    guesses.forEach(g=>{
        const r=document.createElement("div");r.className="review-row";
        [...g.word].forEach((c,i)=>{
            const t=document.createElement("div");
            t.className="tile "+g.res[i];
            t.textContent=c;
            r.appendChild(t);
        });
        rev.appendChild(r);
    });
}

function input(k){
    if(over)return;
    if(k==="ENTER")submit();
    else if(k==="âŒ«")guess=guess.slice(0,-1);
    else if(/^[A-Z]$/.test(k)&&guess.length<5)guess+=k;
    const tiles=board.children[row]?.children;
    if(tiles)for(let i=0;i<5;i++)tiles[i].firstChild.textContent=guess[i]||"";
}

document.querySelectorAll(".key").forEach(k=>k.onclick=()=>input(k.textContent));
document.addEventListener("keydown",e=>{
    if(e.key==="Enter")input("ENTER");
    else if(e.key==="Backspace")input("âŒ«");
    else if(/^[a-zA-Z]$/.test(e.key))input(e.key.toUpperCase());
});
</script>

</body>
</html>